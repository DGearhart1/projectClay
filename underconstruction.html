<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Bulldozer Mustard Scraper</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  html, body {
    margin: 0; padding: 0; overflow: hidden; height: 100%;
    background-color: #d2b04c; /* Mustard background */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  canvas {
    position: absolute;
    top: 0; left: 0;
    display: block;
    pointer-events: none;
  }
  #construction-header,
  #construction-footer {
    position: absolute;
    width: 100%;
    height: auto;
    z-index: 10;
  }
  #construction-header { top: 0; }
  #construction-footer { bottom: 0; }
  #base-layer { z-index: 1; }
  #mustard-layer { z-index: 5; }
  #dozer-layer { z-index: 8; }
</style>
</head>
<body>

<!-- Caution tape banners -->
<img src="caution-tape.png" id="construction-header" alt="Construction Tape" />
<img src="caution-tape.png" id="construction-footer" alt="Construction Tape" />

<!-- Three canvases -->
<canvas id="base-layer"></canvas>      <!-- Brown base + hidden mustard text -->
<canvas id="mustard-layer"></canvas>   <!-- Mustard overlay + brown text -->
<canvas id="dozer-layer"></canvas>     <!-- Bulldozer -->

<script>
  const baseCanvas = document.getElementById('base-layer');
  const mustardCanvas = document.getElementById('mustard-layer');
  const dozerCanvas = document.getElementById('dozer-layer');

  const baseCtx = baseCanvas.getContext('2d');
  const mustardCtx = mustardCanvas.getContext('2d');
  const dozerCtx = dozerCanvas.getContext('2d');

  let width, height;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    baseCanvas.width = mustardCanvas.width = dozerCanvas.width = width;
    baseCanvas.height = mustardCanvas.height = dozerCanvas.height = height;
    drawBase();
    drawMustardOverlay();
  }

  window.addEventListener('resize', resize);

  // Draw brown base with hidden mustard text
  function drawBase() {
    baseCtx.fillStyle = '#5a3e1b'; // Brown
    baseCtx.fillRect(0, 0, width, height);

    baseCtx.fillStyle = '#d2b04c'; // Mustard text
    baseCtx.font = `bold clamp(2rem, 5vw, 3.5rem) 'Segoe UI', sans-serif`;
    baseCtx.textAlign = 'center';
    baseCtx.textBaseline = 'middle';
    baseCtx.fillText("Unlike 90% of our city", width / 2, height / 2 + 80);
  }

  // Draw mustard overlay with brown two-line text (draw once)
  function drawMustardOverlay() {
    mustardCtx.fillStyle = '#d2b04c'; // Mustard
    mustardCtx.fillRect(0, 0, width, height);

    mustardCtx.fillStyle = '#5a3e1b'; // Brown text
    mustardCtx.font = `bold clamp(2rem, 6vw, 4rem) 'Segoe UI', sans-serif`;
    mustardCtx.textAlign = 'center';
    mustardCtx.textBaseline = 'middle';
    mustardCtx.fillText("THIS SITE IS", width / 2, height / 2 - 30);
    mustardCtx.fillText("UNDER CONSTRUCTION", width / 2, height / 2 + 30);
  }

  // Bulldozer setup
  const bulldozer = {
    x: 100,
    y: 100,
    vx: 1.6,
    vy: 1.2,
    size: 100,
    img: new Image(),
  };

  bulldozer.img.src = 'bulldozer.png';

  // Erase mustard ONLY where bulldozer bucket passes (revealing brown base)
  function eraseMustardAtDozer() {
    mustardCtx.save();
    mustardCtx.globalCompositeOperation = 'destination-out';
    // Circle positioned near bottom center of bulldozer for bucket effect
    mustardCtx.beginPath();
    mustardCtx.arc(
      bulldozer.x + bulldozer.size / 2,
      bulldozer.y + bulldozer.size * 0.75,
      bulldozer.size / 2.5,
      0,
      2 * Math.PI
    );
    mustardCtx.fill();
    mustardCtx.restore();
  }

  // Draw bulldozer rotated based on velocity
  function drawBulldozer() {
    dozerCtx.clearRect(0, 0, width, height);
    dozerCtx.save();
    dozerCtx.translate(bulldozer.x + bulldozer.size / 2, bulldozer.y + bulldozer.size / 2);
    // Rotate so bulldozer points along velocity vector - adjust angle if needed
    const angle = Math.atan2(bulldozer.vy, bulldozer.vx) - Math.PI / 2;
    dozerCtx.rotate(angle);
    dozerCtx.drawImage(
      bulldozer.img,
      -bulldozer.size / 2,
      -bulldozer.size / 2,
      bulldozer.size,
      bulldozer.size
    );
    dozerCtx.restore();
  }

  // Animation loop
  function animate() {
    // Move bulldozer
    bulldozer.x += bulldozer.vx;
    bulldozer.y += bulldozer.vy;

    // Bounce off edges
    if (bulldozer.x <= 0 || bulldozer.x + bulldozer.size >= width) bulldozer.vx *= -1;
    if (bulldozer.y <= 0 || bulldozer.y + bulldozer.size >= height) bulldozer.vy *= -1;

    // Erase mustard only under bucket
    eraseMustardAtDozer();

    // Draw bulldozer
    drawBulldozer();

    requestAnimationFrame(animate);
  }

  bulldozer.img.onload = () => {
    resize();
    setTimeout(() => {
      animate();
    }, 2000); // 2-second delay before start
  };
</script>
</body>
</html>
